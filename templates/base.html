{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %} VarsMovieS{% endblock %}</title>
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet"/>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <link href="{% static 'customcss/basecss.css' %}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
</head>
<body class="animated fadeIn">
{% block body %}
    <div class="container">
        <nav class="navbar navbar-expand-sm bg-primary navbar-dark">
            <a class="navbar-brand" href="{% url 'home' %}">VarsMovies</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
                    aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-item nav-link " href="{% url 'upcoming' %}">Upcoming Movies</a>
                    <a class="nav-item nav-link" href="{% url 'popular' %}">Popular</a>
{#                    <a class="nav-item nav-link" href="#">Genres</a>#}
                </div>
                <div class="navbar-nav ml-auto">
                    {% if user.is_authenticated %}
                        <a class="nav-item nav-link active" href="{% url 'user_home_page' user.username %}">Hi {{ user.username }}</a>
                        <a href="{% url 'logout' %}">
                            <button type="button" class="btn btn-outline-dark nav-item mr-1">Logout</button>
                        </a>
                    {% else %}
                        <a href="{% url 'signup' %}">
                            <button type="button" class="btn btn-outline-dark nav-item mr-1">SignUp</button>
                        </a>
                        <a href="{% url 'login' %}#">
                            <button type="button" class="btn btn-dark nav-item ">Login</button>
                        </a>
                    {% endif %}
                </div>

            </div>
        </nav>

        {% block before_content %}
    <form action="{% url 'home' %}" method="post">
        <div class="main mt-3">
            <div class="input-group">
                {% csrf_token %}
                <input type="text" name="movie_name" class="form-control" value="{{ prev_query }}"
                       placeholder="Search Any Movie">
                <div class="input-group-append">
                    <button class="btn btn-secondary" type="submit">
                        Search
                    </button>
                </div>
            </div>
        </div>
    </form>
    <h1 class="mt-5 text-primary">{{ prev_query }}</h1>
        {% endblock %}
        {% block content %}
            <div class="row mt-4">
                {% for result in results.results %}
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 mt-2">
                        <a href="{% url 'movie_detail' result.id %}">
                            <figure class="figure">
                                <figcaption class="figure-caption"><h5>{{ result.title }}</h5></figcaption>
                                {% if result.backdrop_path == None %}
                                    <img src="{% static 'no-image-available.jpg' %}" alt="..."
                                         class="figure-img img-fluid rounded">
                                {% else %}
                                    <img src="https://image.tmdb.org/t/p/w500{{ result.backdrop_path }}" alt="..."
                                         class="figure-img img-fluid rounded">
                                {% endif %}
                                <figcaption class="figure-caption">{{ result.overview|truncatechars:100 }}</figcaption>
                            </figure>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% endblock %}
    </div>


{% endblock %}

</body>
</html>